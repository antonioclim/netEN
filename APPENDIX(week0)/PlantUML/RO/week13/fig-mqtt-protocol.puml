@startuml fig-mqtt-protocol
skinparam backgroundColor white
skinparam defaultFontName Arial
skinparam defaultFontSize 11
skinparam shadowing false
title Flux Protocol MQTT

participant "Senzor\nPublisher" as PUB
participant "Broker\n:1883/:8883" as BROKER
participant "Dashboard\nSubscriber" as SUB

PUB -> BROKER : CONNECT
BROKER --> PUB : CONNACK
SUB -> BROKER : SUBSCRIBE\nhome/+/temperature
BROKER --> SUB : SUBACK
PUB -> BROKER : PUBLISH\nhome/living/temp: 22.5
BROKER --> PUB : PUBACK (QoS 1)
BROKER -> SUB : PUBLISH (redirectionat)
SUB --> BROKER : PUBACK

legend right
QoS 0: cel mult o data
QoS 1: cel putin o data
QoS 2: exact o data
Wildcards: + unic, # multi
endlegend
@enduml
