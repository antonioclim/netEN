services:
  auth:
    image: internetsystemsconsortium/bind9:9.18
    volumes:
      - ./auth:/etc/bind
    networks: [dnsnet]

  resolver:
    image: mvance/unbound:1.20.0
    volumes:
      - ./resolver:/opt/unbound/etc/unbound
    depends_on: [auth]
    networks: [dnsnet]

  client:
    image: python:3.12-slim
    working_dir: /app
    volumes:
      - ./client:/app
    depends_on: [resolver]
    command: ["python", "query.py"]
    networks: [dnsnet]

networks:
  dnsnet:
