@startuml fig-dhcp-dora
'A4 Portrait
skinparam backgroundColor white
skinparam defaultFontName Arial
skinparam defaultFontSize 11
skinparam shadowing false

title DHCP DORA Process\nDynamic Host Configuration Protocol

participant "Client\n(no IP yet)" as C
participant "DHCP Server\n192.168.1.1" as S

== D - Discover (Broadcast) ==

C -> S : DHCP Discover\nSrc: 0.0.0.0\nDst: 255.255.255.255\nI need an IP address!

note right
    Client broadcasts
    to find DHCP servers
    Port 67 (server)
    Port 68 (client)
end note

== O - Offer (Unicast/Broadcast) ==

S --> C : DHCP Offer\nOffered IP: 192.168.1.100\nLease: 86400 seconds\nGateway: 192.168.1.1\nDNS: 8.8.8.8

note right
    Server offers
    configuration
end note

== R - Request (Broadcast) ==

C -> S : DHCP Request\nRequesting: 192.168.1.100\nServer: 192.168.1.1

note right
    Client accepts offer
    (broadcast in case
    multiple servers)
end note

== A - Acknowledge ==

S --> C : DHCP ACK\nAssigned: 192.168.1.100\nLease confirmed

note right
    Server confirms
    Client configures IP
end note

note over C, S
    DHCP provides:
    * IP address
    * Subnet mask
    * Default gateway
    * DNS servers
    * Lease duration
    
    tcpdump -i eth0 port 67 or port 68
end note

