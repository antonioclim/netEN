@startuml fig-tcp-termination
skinparam backgroundColor white
skinparam defaultFontName Arial
skinparam defaultFontSize 11
skinparam shadowing false
title Terminarea Conexiunii TCP

participant "Client\n(Inchidere Activa)" as C
participant "Server\n(Inchidere Pasiva)" as S

C -> S : FIN (Seq=100)
S --> C : ACK (Ack=101)
S --> C : FIN (Seq=300)
C -> S : ACK (Ack=301)

C -> C : TIME_WAIT\n60-120 sec

legend right
Handshake in 4 pasi
TIME_WAIT asigura:
1. ACK final livrat
2. Pachete vechi expirate
ss -tnp | grep TIME_WAIT
endlegend
@enduml
