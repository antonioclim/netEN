@startuml fig-longest-prefix-match
'A4 Landscape
skinparam backgroundColor white
skinparam defaultFontName Arial
skinparam defaultFontSize 11
skinparam shadowing false

title Longest Prefix Match\nRoute selection algorithm

rectangle "Routing Table" as table #F5F5F5 {
    rectangle "10.0.0.0/8 via R1" as r1 #BBDEFB
    rectangle "10.1.0.0/16 via R2" as r2 #C8E6C9
    rectangle "10.1.1.0/24 via R3" as r3 #FFE0B2
    rectangle "0.0.0.0/0 via R4 (default)" as r4 #ECEFF1
}

rectangle "Destination: 10.1.1.50" as dest #FFF9C4

dest .[#43A047,thickness=2].> r3 : MATCH /24\n(most specific)
dest .[#1565C0,dashed].> r2 : match /16
dest .[#1565C0,dashed].> r1 : match /8

note bottom of table
    Matching process for 10.1.1.50:
    
    1. Check 10.1.1.0/24 - MATCH (24 bits)
    2. Check 10.1.0.0/16 - MATCH (16 bits)
    3. Check 10.0.0.0/8  - MATCH (8 bits)
    4. Check 0.0.0.0/0   - MATCH (0 bits)
    
    Winner: /24 (longest prefix = most specific)
    Forward via R3
end note

note as N1
    Administrative Distance:
    Connected: 0
    Static: 1
    OSPF: 110
    RIP: 120
    
    Lower = more trusted
end note

