@startuml fig-tcp-tunnel
skinparam backgroundColor white
skinparam defaultFontName Arial
skinparam defaultFontSize 11
skinparam shadowing false
title TCP Tunnel (Port Forwarding)

participant "Client\n192.168.1.10" as client
participant "Tunnel In\n192.168.1.100:8080" as tin
participant "Tunnel Out\n10.0.0.100" as tout
participant "Target\n10.0.0.50:80" as server

client -> tin : Connect :8080
tin -> tout : Relay
tout -> server : Connect :80

client -> tin : HTTP GET /
tin -> tout : forward
tout -> server : HTTP GET /

server --> tout : HTTP 200 OK
tout --> tin : forward
tin --> client : HTTP 200 OK

legend right
Client sees: 192.168.1.100:8080
Server sees: 10.0.0.100
Use: bypass firewall, ssh -L
endlegend
@enduml
